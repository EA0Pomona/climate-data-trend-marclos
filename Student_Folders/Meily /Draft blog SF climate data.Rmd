---
title: "****Please don't review this yet*****"
author: "Meily Wu Fung"
date: "9/18/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)


```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this


```{r cars}
climate_data=read.csv("/home/CAMPUS/mwew2015/Climate_Change_Narratives/Data/SFclimate_data.csv")
#head(climate_data)
#str(climate_data)
#climate_data$TMAX
#min(climate_data$TMAX) ##[1]-9999
climate_data$TMAX[climate_data$TMAX==-9999]=NA
climate_data$TMIN[climate_data$TMIN==-9999]=NA
#plot(TMAX~DATE,climate_data[1:100,],ty='1')
strDates<-as.character(climate_data$DATE)
#head(strDates)

climate_data$NewDate<-as.Date(strDates, "%Y-%m-%d")
#strDates<-as.character(climate_data$DATE)
str(climate_data)
``` 
plot data from select period of time in a month-basis
```{r}
plot(TMAX~NewDate, climate_data,ty='l')
#lm(TMAX~NewDate, data=climate_data)                             
#summary(lm(TMAX~NewDate,data=climate_data)) 
#par(mfrow=c(2,2))
#plot(lm(TMAX~NewDate,data=climate_data))
#plot(TMAX~NewDate,data=climate_data)
abline(coef(lm(TMAX~NewDate,data=climate_data)), col='red')
#linearmodel<-lm(TMAX~NewDate,data=climate_data)
```
##Creating monthly TMAX Means

```{r}

climate_data$Month = format(as.Date(climate_data$NewDate), format="%m")
climate_data$Year = format(climate_data$NewDate, format = "%Y")
MonthlyTMAXMean=aggregate(TMAX~Month+Year,climate_data,mean)
MonthlyTMAXMean$YEAR=as.numeric(MonthlyTMAXMean$Year)
MonthlyTMAXMean$MONTH=as.numeric(MonthlyTMAXMean$Month)

str(MonthlyTMAXMean)


plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="01",],ty='l', xlim=c(1920,2017), main= "blahblahblah")
January.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="01",])
summary(January.lm)
abline(coef(January.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="02",],ty='l', xlim=c(1920,2017))
February.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="02",])
summary(February.lm)
abline(coef(February.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="03",],ty='l', xlim=c(1920,2017))
March.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="03",])
summary(March.lm)
abline(coef(March.lm), col="red")


plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="04",],ty='l', xlim=c(1920,2017))
April.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="04",])
summary(April.lm)
abline(coef(April.lm), col="red")


plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="05",],ty='l', xlim=c(1920,2017))
May.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="05",])
summary(May.lm)
abline(coef(May.lm), col="red")



plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="06",],ty='l', xlim=c(1920,2017))
June.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="06",])
summary(June.lm)
abline(coef(June.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="07",],ty='l', xlim=c(1920,2017))
July.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="07",])
summary(July.lm)
abline(coef(July.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="08",],ty='l', xlim=c(1920,2017))
August.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="08",])
summary(August.lm)
abline(coef(August.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="09",],ty='l', xlim=c(1920,2017))
September.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="09",])
summary(September.lm)
abline(coef(September.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="10",],ty='l', xlim=c(1920,2017))
October.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="10",])
summary(October.lm)
abline(coef(October.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="11",],ty='l', xlim=c(1920,2017))
November.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="11",])
summary(November.lm)
abline(coef(November.lm), col="red")

plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="12",],ty='l', xlim=c(1920,2017))
December.lm<-lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$Month=="12",])
summary(December.lm)
abline(coef(December.lm), col="red")





Months=c("January", "February", "March", "April", "May", "October", "November", "December")

par(mfrow=c(4,3), mar=c(5,4,3,2)+0.1)
TMAXresult <- NA
for (i in 1:12){
  
plot(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$MONTH==i,], ty="l", las=1, xlim=c(1920,2017))
Month.lm <- lm(TMAX~YEAR, data=MonthlyTMAXMean[MonthlyTMAXMean$MONTH==i,])
summary(Month.lm)
abline(coef(Month.lm), col="red")}



MonthlyTMINMean=aggregate(TMIN~Month+Year,climate_data,mean)
MonthlyTMINMean$YEAR=as.numeric(MonthlyTMINMean$Year)
MonthlyTMINMean$MONTH=as.numeric(MonthlyTMINMean$Month)
head(MonthlyTMINMean)


par(mfrow=c(4,3), mar=c(5,4,3,2)+0.1)
TMINresult <- NA
for (i in 1:12){
  
plot(TMIN~YEAR, data=MonthlyTMINMean[MonthlyTMINMean$MONTH==i,], ty="l", las=1, xlim=c(1920,2017))
Month.lm <- lm(TMIN~YEAR, data=MonthlyTMINMean[MonthlyTMINMean$MONTH==i,])
summary(Month.lm)
abline(coef(Month.lm), col="red")}




```


```{r}




#climate_data<-lm(TMAX ~ NewDate, climate_data)
#abline(coef(lm(climate_data), col='red')

         
```


=====

## Discussion 

The city of San Francisco is home to 870,000 residents, and is the fourth most populous city in California. Besides being the cultural, commercial and financial center of the larger San Francisco Bay Area, it attracts abundant tourists annually with its temperate climate and mix of landmarks. However, with an increasing trend of record-high temperatures and slowly rising average temperatures, climate change has potential threats in the city of San Francisco. Some of these include heat vulnerability, sea level and coastal change, extreme weather events, and air pollution. 
The San Francisco Department of Public Health, funded by the Center for Disease Control and Prevention (CDC) assesses San Francisco’s vulnerability to extreme heat events. The brink of what is considered an “extreme heat day” varies based on the historical average temperatures of the place being analysed. According to a synthesis of climate change impacts in the San Francisco Bay Area done for the California Energy Commission, the temperatures in the high 70s in coastal areas, including San Francisco, are considered extreme heat days, which are lower compared to more inland areas. However, this means that the number of days above these thresholds can be much greater for these coastal areas. For San Francisco, these days are expected to increase dramatically (Ekstrom). 


![](SFextremeheatdays.png)



